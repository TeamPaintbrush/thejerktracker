version: 1.0
runtime: nodejs18
build:
  commands:
    build:
      - echo "Installing dependencies..."
      - npm install
      - echo "Generating Prisma client..."
      - npx prisma generate
      - echo "Building Next.js application..."
      - npm run build
run:
  runtime-version: 18
  command: npm start
  network:
    port: 3000
  env:
    - name: DATABASE_URL
      value: postgresql://postgres:TheJERK2025!@thejerktracker-prod.cm9q2ac2m6kl.us-east-1.rds.amazonaws.com:5432/thejerktracker?schema=public
    - name: NEXTAUTH_SECRET
      value: thejerk-super-secret-production-key-2025-change-me
    - name: NODE_ENV
      value: production