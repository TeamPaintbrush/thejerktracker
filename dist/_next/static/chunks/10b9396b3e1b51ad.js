(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,25585,e=>{"use strict";e.s(["addOrder",()=>o,"exportToCSV",()=>i,"getAllOrders",()=>t,"getNextStatuses",()=>d,"getOrder",()=>s,"getStatusColor",()=>l,"updateOrderStatus",()=>n]);let r="jerk-tracker-orders";function t(){try{let e=localStorage.getItem(r);if(!e)return[];return JSON.parse(e).map(e=>({...e,createdAt:new Date(e.createdAt),updatedAt:e.updatedAt?new Date(e.updatedAt):void 0,preparingAt:e.preparingAt?new Date(e.preparingAt):void 0,readyAt:e.readyAt?new Date(e.readyAt):void 0,outForDeliveryAt:e.outForDeliveryAt?new Date(e.outForDeliveryAt):void 0,pickedUpAt:e.pickedUpAt?new Date(e.pickedUpAt):void 0,cancelledAt:e.cancelledAt?new Date(e.cancelledAt):void 0}))}catch(e){return console.error("Error loading orders:",e),[]}}function s(e){return t().find(r=>r.id===e)||null}function a(e){try{localStorage.setItem(r,JSON.stringify(e))}catch(e){console.error("Error saving orders:",e)}}function o(e){try{let r=t(),s={...e,id:Date.now().toString(36)+Math.random().toString(36).substr(2)};return r.push(s),a(r),s}catch(e){throw console.error("Error adding order:",e),Error("Failed to create order")}}function n(e,r,s){try{let o=new Date,n={...s,status:r,updatedAt:o};switch(r){case"Preparing":n.preparingAt=o;break;case"Ready":n.readyAt=o;break;case"Out for Delivery":n.outForDeliveryAt=o;break;case"Picked Up":n.pickedUpAt=o;break;case"Cancelled":n.cancelledAt=o}try{let r=t(),s=r.findIndex(r=>r.id===e);if(-1===s)throw Error("Order with ID ".concat(e," not found"));return r[s]={...r[s],...n},a(r),r[s]}catch(e){throw console.error("Error updating order:",e),Error("Failed to update order")}}catch(e){throw console.error("Error updating order status:",e),Error("Failed to update order status")}}function i(){let e=t();return 0===e.length?"No orders to export":[["Order Number","Customer Name","Customer Email","Order Details","Status","Created At","Picked Up At","Driver Name","Delivery Company"],...e.map(e=>{var r;return[e.orderNumber,e.customerName||"",e.customerEmail||"",e.orderDetails||"",e.status,e.createdAt.toLocaleString(),(null==(r=e.pickedUpAt)?void 0:r.toLocaleString())||"",e.driverName||"",e.deliveryCompany||""]})].map(e=>e.map(e=>'"'.concat(e,'"')).join(",")).join("\n")}function l(e){switch(e){case"Pending":return"bg-yellow-100 text-yellow-800";case"Preparing":return"bg-blue-100 text-blue-800";case"Ready":return"bg-green-100 text-green-800";case"Out for Delivery":return"bg-purple-100 text-purple-800";case"Picked Up":default:return"bg-gray-100 text-gray-800";case"Cancelled":return"bg-red-100 text-red-800"}}function d(e){switch(e){case"Pending":return["Preparing","Cancelled"];case"Preparing":return["Ready","Cancelled"];case"Ready":return["Out for Delivery","Picked Up","Cancelled"];case"Out for Delivery":return["Picked Up","Cancelled"];default:return[]}}},78894,e=>{"use strict";e.s(["AlertTriangle",()=>r],78894);let r=(0,e.i(75254).default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},16715,e=>{"use strict";e.s(["RefreshCw",()=>r],16715);let r=(0,e.i(75254).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},46417,e=>{"use strict";e.s(["ErrorBoundary",()=>o]);var r=e.i(43476),t=e.i(71645),s=e.i(78894),a=e.i(16715);class o extends t.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,r){console.error("ErrorBoundary caught an error:",e,r),this.setState({errorInfo:r}),this.props.onError&&this.props.onError(e,r),console.error("Production error logged:",{error:e.message,stack:e.stack,componentStack:r.componentStack})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:(0,r.jsx)("div",{className:"min-h-[400px] flex items-center justify-center p-8",children:(0,r.jsxs)("div",{className:"text-center max-w-md",children:[(0,r.jsx)("div",{className:"mb-6 flex justify-center",children:(0,r.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center",children:(0,r.jsx)(s.AlertTriangle,{className:"w-8 h-8 text-red-600"})})}),(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Oops! Something went wrong"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"We encountered an unexpected error. Please try refreshing the page or contact support if the problem persists."}),!1,(0,r.jsxs)("button",{onClick:()=>window.location.reload(),className:"inline-flex items-center gap-2 bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 transition-colors",children:[(0,r.jsx)(a.RefreshCw,{className:"w-4 h-4"}),"Refresh Page"]})]})}):this.props.children}constructor(e){super(e),this.state={hasError:!1}}}},40174,e=>{"use strict";e.s(["default",()=>l]);var r=e.i(43476),t=e.i(71645),s=e.i(18566),a=e.i(25585),o=e.i(83036),n=e.i(46417);let i=()=>((0,t.useEffect)(()=>{let e=setTimeout(()=>{window.location.href="/admin"},3e3);return()=>clearTimeout(e)},[]),null);function l(){let{showToast:e}=(0,o.useToast)(),l=(0,s.useSearchParams)(),d=null==l?void 0:l.get("id"),[c,u]=(0,t.useState)(null),[m,p]=(0,t.useState)(!0),[h,x]=(0,t.useState)(""),[g,y]=(0,t.useState)(""),[f,v]=(0,t.useState)(!1);(0,t.useEffect)(()=>{(()=>{if(!d)return p(!1);try{let e=(0,a.getOrder)(d);u(e),p(!1)}catch(r){console.error("Error fetching order:",r),e({type:"error",title:"Failed to load order",message:"There was an error loading the order details."}),p(!1)}})()},[d,e]),(0,t.useEffect)(()=>{if(!d||f||(null==c?void 0:c.status)==="Picked Up")return;let r=setInterval(()=>{try{let e=(0,a.getOrder)(d);e&&e.status!==(null==c?void 0:c.status)&&u(e)}catch(r){console.error("Error auto-refreshing order:",r),e({type:"warning",title:"Auto-refresh failed",message:"Could not refresh order status automatically."})}},5e3);return()=>clearInterval(r)},[d,f,null==c?void 0:c.status,e]);let b=async r=>{if(r.preventDefault(),c&&d)try{(0,a.updateOrderStatus)(d,"Picked Up",{driverName:h||void 0,deliveryCompany:g||void 0}),v(!0),e({type:"success",title:"Order Updated",message:"Order has been marked as picked up successfully."})}catch(r){console.error("Error updating order:",r),e({type:"error",title:"Update Failed",message:"There was an error updating the order status."})}};if(m)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)("div",{children:"Loading order..."})});if(!d)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Invalid Order"}),(0,r.jsx)("p",{children:"No order ID provided in the URL."})]})});if(!c)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Order Not Found"}),(0,r.jsx)("p",{children:"The order you're looking for doesn't exist."})]})});if(f||"Picked Up"===c.status){var j;return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-green-50 px-4",children:(0,r.jsxs)("div",{className:"text-center p-6 sm:p-8 bg-white rounded-lg shadow-md max-w-md w-full",children:[(0,r.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-green-600 mb-4",children:"âœ“ Order Confirmed"}),(0,r.jsxs)("p",{className:"text-gray-600 mb-4 text-sm sm:text-base",children:["Order #",c.orderNumber," has been picked up!"]}),(0,r.jsxs)("div",{className:"text-xs sm:text-sm text-gray-500 space-y-1 mb-4",children:[(0,r.jsxs)("p",{children:["Picked up at: ",null==(j=c.pickedUpAt)?void 0:j.toLocaleString()]}),c.driverName&&(0,r.jsxs)("p",{children:["Driver: ",c.driverName]}),c.deliveryCompany&&(0,r.jsxs)("p",{children:["Company: ",c.deliveryCompany]})]}),(0,r.jsx)("p",{className:"text-xs text-gray-400",children:"Redirecting to admin panel in 3 seconds..."}),(0,r.jsx)(i,{})]})})}return(0,r.jsx)(n.ErrorBoundary,{children:(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 py-4 px-4 sm:py-8",children:(0,r.jsxs)("div",{className:"max-w-md mx-auto bg-white rounded-lg shadow-md p-4 sm:p-6",children:[(0,r.jsx)("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-4 sm:mb-6 text-center",children:"Order Pickup"}),(0,r.jsxs)("div",{className:"mb-4 sm:mb-6 p-3 sm:p-4 bg-gray-100 rounded-lg",children:[(0,r.jsx)("h2",{className:"font-semibold text-gray-700 mb-2 text-sm sm:text-base",children:"Order Details"}),(0,r.jsxs)("div",{className:"space-y-1 text-sm sm:text-base",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Order #:"})," ",c.orderNumber]}),c.customerName&&(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Customer:"})," ",c.customerName]}),c.orderDetails&&(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Details:"})," ",c.orderDetails]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Status:"})," ",(0,r.jsx)("span",{className:"text-yellow-600",children:c.status})]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Created:"})," ",c.createdAt.toLocaleString()]})]})]}),(0,r.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"driverName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Driver Name (optional)"}),(0,r.jsx)("input",{type:"text",id:"driverName",value:h,onChange:e=>x(e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-3 sm:py-2 text-base sm:text-sm focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Enter driver name"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"deliveryCompany",className:"block text-sm font-medium text-gray-700 mb-1",children:"Delivery Company (optional)"}),(0,r.jsxs)("select",{id:"deliveryCompany",value:g,onChange:e=>y(e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-3 sm:py-2 text-base sm:text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 bg-white",children:[(0,r.jsx)("option",{value:"",children:"Select delivery company"}),(0,r.jsx)("option",{value:"UberEats",children:"UberEats"}),(0,r.jsx)("option",{value:"DoorDash",children:"DoorDash"}),(0,r.jsx)("option",{value:"GrubHub",children:"GrubHub"}),(0,r.jsx)("option",{value:"Postmates",children:"Postmates"}),(0,r.jsx)("option",{value:"Skip the Dishes",children:"Skip the Dishes"}),(0,r.jsx)("option",{value:"Seamless",children:"Seamless"}),(0,r.jsx)("option",{value:"Deliveroo",children:"Deliveroo"}),(0,r.jsx)("option",{value:"Custom",children:"Custom/Other"})]})]}),(0,r.jsx)("button",{type:"submit",className:"w-full bg-orange-500 text-white py-3 sm:py-2 px-4 rounded-md hover:bg-orange-600 focus:outline-none focus:ring-2 focus:ring-orange-500 font-medium text-base sm:text-sm mt-6 transition-colors",children:"Confirm Pickup"})]})]})})})}}]);